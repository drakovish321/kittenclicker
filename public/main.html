<!DOCTYPE html>
<html lang="en">
<head>
Â  <meta charset="UTF-8" />
Â  <meta name="viewport" content="width=device-width, initial-scale=1" />
Â  <title>Kitten Clicker</title>
Â  <style>
Â  Â  body {
Â  Â  Â  font-family: Arial, sans-serif;
Â  Â  Â  margin: 0;
Â  Â  Â  padding-top: 80px;
Â  Â  Â  text-align: center;
Â  Â  }
Â  Â  h1 { margin-bottom: 0; }
Â  Â  #score { font-size: 24px; margin: 5px 0 10px 0; }
Â  Â  #stats { margin-bottom: 30px; }
Â  Â  #kitten {
Â  Â  Â  width: 300px; cursor: pointer; border-radius: 20px;
Â  Â  Â  transition: transform 0.2s ease;
Â  Â  }
Â  Â  .pulse { animation: pulseAnim 0.3s ease forwards; }
Â  Â  @keyframes pulseAnim {
Â  Â  Â  0% { transform: scale(1); }
Â  Â  Â  50% { transform: scale(1.2); }
Â  Â  Â  100% { transform: scale(1); }
Â  Â  }
Â  Â  .top-buttons {
Â  Â  Â  position: fixed; top: 20px; right: 20px;
Â  Â  Â  display: flex; flex-direction: column; gap: 10px; z-index: 1001;
Â  Â  }
Â  Â  .top-buttons button {
Â  Â  Â  padding: 10px 20px; font-size: 16px;
Â  Â  Â  border: none; border-radius: 8px; cursor: pointer;
Â  Â  Â  transition: opacity 0.2s;
Â  Â  }
Â  Â  .top-buttons button:disabled,
Â  Â  .top-buttons button[disabled] {
Â  Â  Â  opacity: 0.5;
Â  Â  Â  cursor: not-allowed;
Â  Â  }
Â  Â  .overlay {
Â  Â  Â  display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
Â  Â  Â  background: rgba(255,255,255,0.95); z-index: 1000; padding: 60px 20px 20px;
Â  Â  Â  overflow-y: auto; box-sizing: border-box;
Â  Â  }
Â  Â  .overlay h2 { margin-bottom: 30px; }
Â  Â  .shop-tabs { margin-bottom: 20px; }
Â  Â  .shop-tab {
Â  Â  Â  display: inline-block; padding: 10px 20px; margin: 0 5px;
Â  Â  Â  font-weight: bold; border-radius: 8px 8px 0 0; cursor: pointer;
Â  Â  Â  transition: opacity 0.2s;
Â  Â  }
Â  Â  .shop-tab:disabled,
Â  Â  .shop-tab[disabled] {
Â  Â  Â  opacity: 0.5;
Â  Â  Â  cursor: not-allowed;
Â  Â  }
Â  Â  .shop-content {
Â  Â  Â  border-radius: 0 8px 8px 8px; padding: 15px;
Â  Â  Â  max-width: 600px; margin: 0 auto; box-shadow: 0 4px 8px rgba(0,0,0,0.2);
Â  Â  }
Â  Â  .shop-item {
Â  Â  Â  margin: 15px auto; padding: 15px; border-radius: 10px;
Â  Â  Â  box-shadow: 0 2px 5px rgba(0,0,0,0.1);
Â  Â  }
Â  Â  .shop-item strong { font-size: 18px; }
Â  Â  .shop-item button {
Â  Â  Â  padding: 10px 20px; border: none; border-radius: 6px;
Â  Â  Â  cursor: pointer; margin-top: 8px;
Â  Â  Â  transition: opacity 0.2s;
Â  Â  }
Â  Â  .shop-item button:disabled,
Â  Â  .shop-item button[disabled] {
Â  Â  Â  opacity: 0.5;
Â  Â  Â  cursor: not-allowed;
Â  Â  }
Â  Â  .closeOverlay {
Â  Â  Â  position: absolute; top: 20px; left: 20px; background: red; color: white;
Â  Â  Â  border: none; padding: 5px 15px; font-size: 20px; border-radius: 8px;
Â  Â  Â  cursor: pointer; z-index: 1001;
Â  Â  }
Â  Â  #progressOverlay textarea {
Â  Â  Â  width: 90%; height: 150px; margin-top: 10px; font-family: monospace;
Â  Â  Â  font-size: 14px; resize: none;
Â  Â  }
Â  Â  #progressOverlay input { width: 90%; padding: 8px; font-size: 16px; margin-top: 10px; }
Â  Â  #progressOverlay button {
Â  Â  Â  margin-top: 10px; padding: 8px 16px; border-radius: 6px; border: none;
Â  Â  Â  cursor: pointer; font-size: 16px; transition: opacity 0.2s;
Â  Â  }
Â  Â  #progressOverlay button:disabled,
Â  Â  #progressOverlay button[disabled] {
Â  Â  Â  opacity: 0.5;
Â  Â  Â  cursor: not-allowed;
Â  Â  }
Â  Â  #settingsOverlay label, #settingsOverlay select, #settingsOverlay input, #settingsOverlay button { font-size: 18px; }
Â  Â  #settingsOverlay select, #settingsOverlay input[type="range"] {
Â  Â  Â  margin-top: 10px; padding: 8px 12px; border-radius: 6px;
Â  Â  Â  border: 1px solid #880e4f; background: white; cursor: pointer;
Â  Â  }
Â  Â  #settingsOverlay label { display: block; margin-top: 16px; }
Â  Â  #settingsOverlay input[type="checkbox"] { margin-left:10px;margin-right:6px; }
Â  Â  #settingsOverlay .setting-row { margin-bottom: 16px; }
Â  Â  #settingsOverlay .setting-title { font-weight:bold;display:inline-block;width:180px;text-align:left;}
Â  Â  #achievementsList {
Â  Â  Â  display: flex; flex-wrap: wrap; justify-content: center; gap: 18px;
Â  Â  Â  max-width: 700px; margin: 0 auto;
Â  Â  }
Â  Â  .achievement-card {
Â  Â  Â  display: flex; align-items: center; gap: 14px;
Â  Â  Â  width: 320px; min-width: 320px; max-width: 320px;
Â  Â  Â  min-height: 72px; max-height: 72px;
Â  Â  Â  padding: 18px 20px; margin: 8px 0; border-radius: 15px;
Â  Â  Â  box-shadow: 0 4px 12px rgba(140,0,70,0.12);
Â  Â  Â  font-size: 18px; font-weight: 500;
Â  Â  Â  transition: transform 0.15s, box-shadow 0.15s, background 0.3s;
Â  Â  Â  border: 2px solid #f8bbd0; opacity: 0.92; position: relative; box-sizing: border-box;
Â  Â  }
Â  Â  .achievement-icon {
Â  Â  Â  font-size: 2em; margin-right: 5px; filter: drop-shadow(0 1px 1px #fff5);
Â  Â  Â  text-shadow: 0 2px 10px #fff8; width: 40px; text-align: center;
Â  Â  }
Â  Â  .achievement-card:hover {
Â  Â  Â  transform: translateY(-3px) scale(1.03);
Â  Â  Â  box-shadow: 0 10px 24px 0 rgba(180,40,130,0.13); opacity: 1; z-index: 2;
Â  Â  }
Â  Â  .breed-select-btn {
Â  Â  Â  padding: 8px 22px; border-radius: 12px; border: none;
Â  Â  Â  margin-top: 10px; margin-left: 8px; margin-right: 8px;
Â  Â  Â  font-size: 18px; font-weight: bold; cursor: pointer; transition: background .2s, opacity 0.2s;
Â  Â  }
Â  Â  .breed-select-btn:disabled,
Â  Â  .breed-select-btn[disabled] {
Â  Â  Â  opacity: 0.5;
Â  Â  Â  cursor: not-allowed;
Â  Â  }
Â  Â  .breed-lock {
Â  Â  Â  color: #aaa; font-size: 20px; margin-left: 6px; vertical-align: middle;
Â  Â  }
Â  Â  #mysteryKittenBtn {
Â  Â  Â  display: none;
Â  Â  Â  position: fixed;
Â  Â  Â  z-index: 2500;
Â  Â  Â  padding: 14px 34px;
Â  Â  Â  font-size: 20px;
Â  Â  Â  border: none;
Â  Â  Â  border-radius: 12px;
Â  Â  Â  font-weight: bold;
Â  Â  Â  cursor: pointer;
Â  Â  Â  background: #ffd600;
Â  Â  Â  color: #880e4f;
Â  Â  Â  transition: opacity 0.2s, left 0.2s, top 0.2s;
Â  Â  }
Â  Â  #mysteryKittenBtn:disabled,
Â  Â  #mysteryKittenBtn[disabled] {
Â  Â  Â  opacity: 0.5;
Â  Â  Â  cursor: not-allowed;
Â  Â  }
Â  Â  body.theme-pink { background: #fce4ec; color: #880e4f; }
Â  Â  body.theme-blue { background: #e3f2fd; color: #1565c0; }
Â  Â  body.theme-dark { background: #121212; color: #bb86fc; }
Â  Â  body.theme-mint { background: #e0fdfa; color: #00796b; }
Â  Â  body.theme-orange { background: #fff3e0; color: #e65100; }
Â  </style>
</head>
<body class="theme-pink">
<audio id="clickSound" src="https://cdn.pixabay.com/audio/2022/07/26/audio_124bfa6e3e.mp3" preload="auto"></audio>
<h1>Kitten Clicker</h1>
<p id="score">Score: 0</p>
<p id="stats">Click Value: <span id="clickValue">1</span> | CPS: <span id="autoClickers">0</span></p>
<img id="kitten" src="https://cdn.pixabay.com/photo/2017/11/09/21/41/american-shorthair-2934720_1280.jpg" alt="American Shorthair Kitten" />
<button id="mysteryKittenBtn">Mystery Kitten</button>
<div class="top-buttons">
Â  <button onclick="openOverlay('shopOverlay')">Shop</button>
Â  <button onclick="openOverlay('progressOverlay')">Progress</button>
Â  <button onclick="openOverlay('settingsOverlay')">Settings</button>
Â  <button onclick="openOverlay('achievementsOverlay')">Achievements</button>
Â  <button onclick="openOverlay('breedsOverlay')">Breeds</button>
</div>
<div id="shopOverlay" class="overlay">
Â  <button class="closeOverlay" onclick="closeOverlay('shopOverlay')">X</button>
Â  <h2>Kitten Shop</h2>
Â  <div class="shop-tabs">
Â  Â  <div class="shop-tab active" id="tabClickUpgrades" onclick="showTab('clickUpgrades')">Click Upgrades</div>
Â  Â  <div class="shop-tab" id="tabCPSUpgrades" onclick="showTab('cpsUpgrades')">CPS Upgrades</div>
Â  </div>
Â  <div id="clickUpgrades" class="shop-content">
Â  Â  <div class="shop-item"><strong>Milk Bowl</strong><br />+0.5 click value<br />
Â  Â  Â  <button onclick="buyUpgrade('milkBowl', 0.5)" id="milkBowlBtn">Buy for <span id="milkBowlCost">25</span></button>
Â  Â  </div>
Â  Â  <div class="shop-item"><strong>Cat Food</strong><br />+2 click value<br />
Â  Â  Â  <button onclick="buyUpgrade('catFood', 2)" id="catFoodBtn">Buy for <span id="catFoodCost">115</span></button>
Â  Â  </div>
Â  Â  <div class="shop-item"><strong>Scratcher</strong><br />+7 click value<br />
Â  Â  Â  <button onclick="buyUpgrade('scratcher', 7)" id="scratcherBtn">Buy for <span id="scratcherCost">700</span></button>
Â  Â  </div>
Â  Â  <div class="shop-item"><strong>Kitten Factory</strong><br />+15 click value<br />
Â  Â  Â  <button onclick="buyUpgrade('kittenFactory', 15)" id="kittenFactoryBtn">Buy for <span id="kittenFactoryCost">5000</span></button>
Â  Â  </div>
Â  Â  <div class="shop-item"><strong>City of Kittens</strong><br />+30 click value<br />
Â  Â  Â  <button onclick="buyUpgrade('cityOfKittens', 30)" id="cityOfKittensBtn">Buy for <span id="cityOfKittensCost">30000</span></button>
Â  Â  </div>
Â  Â  <div class="shop-item"><strong>A World of Meows</strong><br />+80 click value<br />
Â  Â  Â  <button onclick="buyUpgrade('worldOfMeows', 80)" id="worldOfMeowsBtn">Buy for <span id="worldOfMeowsCost">200000</span></button>
Â  Â  </div>
Â  </div>
Â  <div id="cpsUpgrades" class="shop-content" style="display:none;">
Â  Â  <div class="shop-item"><strong>Auto-Mouse</strong><br />+5 CPS<br />
Â  Â  Â  <button onclick="buyAutoClicker()" id="autoClickerBtn">Buy for <span id="autoClickerCost">2000</span></button>
Â  Â  </div>
Â  Â  <div class="shop-item"><strong>Auto-Kitten Farm</strong><br />+7 CPS<br />
Â  Â  Â  <button onclick="buyAutoKittenFarm()" id="autoKittenFarmBtn">Buy for <span id="autoKittenFarmCost">15000</span></button>
Â  Â  </div>
Â  Â  <div class="shop-item"><strong>Kitten Planet</strong><br />+20 CPS<br />
Â  Â  Â  <button onclick="buyKittenPlanet()" id="kittenPlanetBtn">Buy for <span id="kittenPlanetCost">1000000</span></button>
Â  Â  </div>
Â  </div>
</div>
<div id="progressOverlay" class="overlay">
Â  <button class="closeOverlay" onclick="closeOverlay('progressOverlay')">X</button>
Â  <h2>Save / Load Progress</h2>
Â  <button onclick="exportSave()">Get Save Code</button><br />
Â  <textarea id="saveCodeBox" readonly placeholder="Your save code will appear here after clicking 'Get Save Code'"></textarea><br />
Â  <input type="text" id="loadSaveCode" placeholder="Paste your save code here" />
Â  <button onclick="loadSave(document.getElementById('loadSaveCode').value)">Load Save Code</button>
</div>
<div id="settingsOverlay" class="overlay">
Â  <button class="closeOverlay" onclick="closeOverlay('settingsOverlay')">X</button>
Â  <h2>Settings</h2>
Â  <div class="setting-row">
Â  Â  <label for="themeSelect"><span class="setting-title">Color Theme:</span></label>
Â  Â  <select id="themeSelect">
Â  Â  Â  <option value="pink" selected>Pink</option>
Â  Â  Â  <option value="blue">Blue</option>
Â  Â  Â  <option value="dark">Dark</option>
Â  Â  Â  <option value="mint">Mint</option>
Â  Â  Â  <option value="orange">Orange</option>
Â  Â  </select>
Â  </div>
Â  <div class="setting-row">
Â  Â  <label><span class="setting-title">Floating Scores:</span>
Â  Â  Â  <input type="checkbox" id="floatScoreToggle" checked>
Â  Â  Â  Show
Â  Â  </label>
Â  </div>
Â  <div class="setting-row">
Â  Â  <label for="notifVolume"><span class="setting-title">Notification Volume:</span></label>
Â  Â  <input type="range" min="0" max="1" step="0.01" id="notifVolume" value="1">
Â  </div>
Â  <div class="setting-row">
Â  Â  <label><span class="setting-title">Disable Animations:</span>
Â  Â  Â  <input type="checkbox" id="disableAnimations">
Â  Â  </label>
Â  Â  </div>
Â  <div class="setting-row">
Â  Â  <button onclick="resetProgress()" style="background:#b71c1c;color:#fff;">Reset Progress</button>
Â  </div>
</div>
<div id="achievementsOverlay" class="overlay">
Â  <button class="closeOverlay" onclick="closeOverlay('achievementsOverlay')">X</button>
Â  <h2>Achievements</h2>
Â  <div id="achievementsList"></div>
</div>
<div id="breedsOverlay" class="overlay">
Â  <button class="closeOverlay" onclick="closeOverlay('breedsOverlay')">X</button>
Â  <h2>Cat Breeds</h2>
Â  <div id="breedsList"></div>
</div>
<script>
Â  let score = 0, clickValue = 1;
Â  let upgrades = {milkBowl:0,catFood:0,scratcher:0,kittenFactory:0,cityOfKittens:0,worldOfMeows:0,autoClicker:0,autoKittenFarm:0,kittenPlanet:0};
Â  let upgradeCosts = {milkBowl:25,catFood:115,scratcher:700,kittenFactory:5000,cityOfKittens:30000,worldOfMeows:200000,autoClicker:2000,autoKittenFarm:15000,kittenPlanet:1000000};
Â  let selectedBreed = "american_shorthair";
Â  let breedsUnlocked = { american_shorthair: true, maine_coon: false, siamese: false };
Â  let breedImages = {
Â  Â  american_shorthair: "https://cdn.pixabay.com/photo/2017/11/09/21/41/american-shorthair-2934720_1280.jpg",
Â  Â  maine_coon: "https://cdn.pixabay.com/photo/2021/12/17/19/15/pet-6877246_1280.jpg",
Â  Â  siamese: "https://cdn.pixabay.com/photo/2017/09/08/22/30/siamese-2730465_1280.jpg"
Â  };
Â  let breedNames = {
Â  Â  american_shorthair: "American Shorthair",
Â  Â  maine_coon: "Maine Coon",
Â  Â  siamese: "Siamese"
Â  };
Â  // Extra CPS/click bonus for breeds
Â  let extraCPSBreed = { maine_coon: 5, american_shorthair: 0, siamese: 0 };
Â  let extraClickValueBreed = { american_shorthair: 0, maine_coon: 0, siamese: 20 };

Â  let achievementsData = [
Â  Â  { id: 'click1', text: 'CLICK: Click the kitten!', achieved: false, condition: () => score > 0 },
Â  Â  { id: 'milkBowl1', text: 'You have to start somewhere: Buy your first Milk Bowl', achieved: false, condition: () => upgrades.milkBowl >= 1 },
Â  Â  { id: 'score100', text: 'Score 100 points', achieved: false, condition: () => score >= 100 },
Â  Â  { id: 'score1000', text: 'Score 1000 points', achieved: false, condition: () => score >= 1000 },
Â  Â  { id: 'click10', text: 'Get 10 click value', achieved: false, condition: () => clickValue >= 10 },
Â  Â  { id: 'auto1', text: 'Buy your first Auto-Mouse', achieved: false, condition: () => upgrades.autoClicker >= 1 },
Â  Â  { id: 'truepower', text: 'True Power: Select a new kitten breed!', achieved: false, condition: () => selectedBreed !== "american_shorthair" },
Â  Â  { id: 'tenk', text: '10k: Get 10000 kittens!', achieved: false, condition: () => score >= 10000 },
Â  Â  { id: 'mystery1', text: 'Take a chance: Try the Mystery Kitten!', achieved: false, condition: () => window.usedMysteryKitten }
Â  ];
Â  window.usedMysteryKitten = false;

Â  // Settings State
Â  let userSettings = {
Â  Â  theme: "pink",
Â  Â  floatScore: true,
Â  Â  notifVolume: 1,
Â  Â  disableAnimations: false
Â  };

Â  const scoreEl = document.getElementById('score');
Â  const clickValueEl = document.getElementById('clickValue');
Â  const autoClickersEl = document.getElementById('autoClickers');
Â  const kittenImg = document.getElementById('kitten');
Â  const clickSound = document.getElementById('clickSound');
Â  const mysteryKittenBtn = document.getElementById('mysteryKittenBtn');

Â  kittenImg.addEventListener('click', () => {
Â  Â  clickSound.currentTime = 0;
Â  Â  clickSound.volume = userSettings.notifVolume;
Â  Â  clickSound.play();
Â  Â  addScore(getCurrentClickValue());
Â  Â  if(!userSettings.disableAnimations){
Â  Â  Â  kittenImg.classList.add('pulse');
Â  Â  Â  setTimeout(() => kittenImg.classList.remove('pulse'), 300);
Â  Â  }
Â  });
Â  function getCurrentClickValue() {
Â  Â  return clickValue + (extraClickValueBreed[selectedBreed] || 0);
Â  }
Â  function addScore(amount) {
Â  Â  score += amount;
Â  Â  if(userSettings.floatScore)
Â  Â  Â  showFloatingScore(amount);
Â  Â  updateUI();
Â  Â  checkAchievements();
Â  }
Â  function showFloatingScore(amount) {
Â  Â  const floatEl = document.createElement('div');
Â  Â  floatEl.textContent = (amount >= 0 ? '+' : '') + Math.floor(amount);
Â  Â  floatEl.style.position = 'absolute';
Â  Â  floatEl.style.left = `${window.innerWidth/2}px`;
Â  Â  floatEl.style.top = `${kittenImg.getBoundingClientRect().top}px`;
Â  Â  floatEl.style.transform = 'translateX(-50%)';
Â  Â  floatEl.style.color = amount >= 0 ? '#c2185b' : '#b71c1c';
Â  Â  floatEl.style.fontWeight = 'bold';
Â  Â  floatEl.style.fontSize = '20px';
Â  Â  floatEl.style.zIndex = 2000;
Â  Â  document.body.appendChild(floatEl);
Â  Â  let top = floatEl.offsetTop, opacity = 1;
Â  Â  const anim = setInterval(() => {
Â  Â  Â  top -= 1.5;
Â  Â  Â  opacity -= 0.02;
Â  Â  Â  floatEl.style.top = top + 'px';
Â  Â  Â  floatEl.style.opacity = opacity;
Â  Â  Â  if (opacity <= 0) { clearInterval(anim); floatEl.remove(); }
Â  Â  }, 16);
Â  }
Â  function updateUI() {
Â  Â  let breedCPS = extraCPSBreed[selectedBreed] || 0;
Â  Â  const totalCPS = upgrades.autoClicker * 5 + upgrades.autoKittenFarm * 7 + upgrades.kittenPlanet * 20 + breedCPS;
Â  Â  scoreEl.textContent = `Score: ${Math.floor(score)}`;
Â  Â  clickValueEl.textContent = getCurrentClickValue().toFixed(1);
Â  Â  autoClickersEl.textContent = totalCPS;
Â  Â  kittenImg.src = breedImages[selectedBreed];
Â  Â  if(document.getElementById('milkBowlCost')) document.getElementById('milkBowlCost').textContent = upgradeCosts.milkBowl;
Â  Â  if(document.getElementById('catFoodCost')) document.getElementById('catFoodCost').textContent = upgradeCosts.catFood;
Â  Â  if(document.getElementById('scratcherCost')) document.getElementById('scratcherCost').textContent = upgradeCosts.scratcher;
Â  Â  if(document.getElementById('kittenFactoryCost')) document.getElementById('kittenFactoryCost').textContent = upgradeCosts.kittenFactory;
Â  Â  if(document.getElementById('cityOfKittensCost')) document.getElementById('cityOfKittensCost').textContent = upgradeCosts.cityOfKittens;
Â  Â  if(document.getElementById('worldOfMeowsCost')) document.getElementById('worldOfMeowsCost').textContent = upgradeCosts.worldOfMeows;
Â  Â  if(document.getElementById('autoClickerCost')) document.getElementById('autoClickerCost').textContent = upgradeCosts.autoClicker;
Â  Â  if(document.getElementById('autoKittenFarmCost')) document.getElementById('autoKittenFarmCost').textContent = upgradeCosts.autoKittenFarm;
Â  Â  if(document.getElementById('kittenPlanetCost')) document.getElementById('kittenPlanetCost').textContent = upgradeCosts.kittenPlanet;
Â  Â  if(document.getElementById('milkBowlBtn')) document.getElementById('milkBowlBtn').disabled = score < upgradeCosts.milkBowl;
Â  Â  if(document.getElementById('catFoodBtn')) document.getElementById('catFoodBtn').disabled = score < upgradeCosts.catFood;
Â  Â  if(document.getElementById('scratcherBtn')) document.getElementById('scratcherBtn').disabled = score < upgradeCosts.scratcher;
Â  Â  if(document.getElementById('kittenFactoryBtn')) document.getElementById('kittenFactoryBtn').disabled = score < upgradeCosts.kittenFactory;
Â  Â  if(document.getElementById('cityOfKittensBtn')) document.getElementById('cityOfKittensBtn').disabled = score < upgradeCosts.cityOfKittens;
Â  Â  if(document.getElementById('worldOfMeowsBtn')) document.getElementById('worldOfMeowsBtn').disabled = score < upgradeCosts.worldOfMeows;
Â  Â  if(document.getElementById('autoClickerBtn')) document.getElementById('autoClickerBtn').disabled = score < upgradeCosts.autoClicker;
Â  Â  if(document.getElementById('autoKittenFarmBtn')) document.getElementById('autoKittenFarmBtn').disabled = score < upgradeCosts.autoKittenFarm;
Â  Â  if(document.getElementById('kittenPlanetBtn')) document.getElementById('kittenPlanetBtn').disabled = score < upgradeCosts.kittenPlanet;
Â  }
Â  function buyUpgrade(name, increment) {
Â  Â  if (score >= upgradeCosts[name]) {
Â  Â  Â  score -= upgradeCosts[name];
Â  Â  Â  clickValue += increment;
Â  Â  Â  upgrades[name]++;
Â  Â  Â  upgradeCosts[name] = Math.ceil(upgradeCosts[name] * 1.2);
Â  Â  Â  updateUI();
Â  Â  }
Â  }
Â  function buyAutoClicker() {
Â  Â  if (score >= upgradeCosts.autoClicker) {
Â  Â  Â  score -= upgradeCosts.autoClicker;
Â  Â  Â  upgrades.autoClicker++;
Â  Â  Â  upgradeCosts.autoClicker = Math.ceil(upgradeCosts.autoClicker * 1.2);
Â  Â  Â  updateUI();
Â  Â  }
Â  }
Â  function buyAutoKittenFarm() {
Â  Â  if (score >= upgradeCosts.autoKittenFarm) {
Â  Â  Â  score -= upgradeCosts.autoKittenFarm;
Â  Â  Â  upgrades.autoKittenFarm++;
Â  Â  Â  upgradeCosts.autoKittenFarm = Math.ceil(upgradeCosts.autoKittenFarm * 1.2);
Â  Â  Â  updateUI();
Â  Â  }
Â  }
Â  function buyKittenPlanet() {
Â  Â  if (score >= upgradeCosts.kittenPlanet) {
Â  Â  Â  score -= upgradeCosts.kittenPlanet;
Â  Â  Â  upgrades.kittenPlanet++;
Â  Â  Â  upgradeCosts.kittenPlanet = Math.ceil(upgradeCosts.kittenPlanet * 1.2);
Â  Â  Â  updateUI();
Â  Â  }
Â  }

    // --- NEW: Save and Load Functions ---
    function saveGameState() {
      // Data to save: all game state variables
      const saveData = {
        score, clickValue, upgrades, upgradeCosts, selectedBreed, 
        breedsUnlocked, achievementsData, userSettings, usedMysteryKitten: window.usedMysteryKitten
      };
      
      try {
        localStorage.setItem('kittenSave', JSON.stringify(saveData));
        console.log('Game saved to localStorage.');
      } catch (e) {
        console.error('Could not save game to localStorage', e);
      }
    }

Â  function exportSave() {
Â  Â  const saveData = { score, clickValue, upgrades, upgradeCosts, selectedBreed, breedsUnlocked, achievementsData, userSettings, usedMysteryKitten: window.usedMysteryKitten };
Â  Â  const saveString = btoa(JSON.stringify(saveData));
Â  Â  const textarea = document.getElementById('saveCodeBox');
Â  Â  textarea.value = saveString;
Â  Â  textarea.select();
Â  }
Â  
Â  function loadSave(saveString = null) { // Takes an optional save string
Â  Â  const input = saveString;
Â  Â  let data;

Â  Â  try {
Â  Â  Â  let rawData = null;

Â  Â  Â  if (input && input.length > 5) {
Â  Â  Â  Â  // Loading from save code input
Â  Â  Â  Â  rawData = atob(input);
Â  Â  Â  Â  alert('Save code loaded!');
Â  Â  Â  } else if (localStorage.getItem('kittenSave')) {
Â  Â  Â  Â  // Loading from local storage
Â  Â  Â  Â  rawData = localStorage.getItem('kittenSave');
Â  Â  Â  } else {
Â  Â  Â  Â  console.log('No saved game found.');
Â  Â  Â  Â  return; // Nothing to load, exit gracefully
Â  Â  Â  }

Â  Â  Â  if (!rawData) return; // Still nothing, exit

Â  Â  Â  data = JSON.parse(rawData);
Â  Â  Â  
Â  Â  Â  // Apply loaded data
Â  Â  Â  score = data.score || 0;
Â  Â  Â  clickValue = data.clickValue || 1;
Â  Â  Â  // Using spread/Object.assign to prevent loading a partial object from breaking things
Â  Â  Â  upgrades = Object.assign(upgrades, data.upgrades || {});
Â  Â  Â  upgradeCosts = Object.assign(upgradeCosts, data.upgradeCosts || {});
Â  Â  Â  selectedBreed = data.selectedBreed || "american_shorthair";
Â  Â  Â  breedsUnlocked = Object.assign(breedsUnlocked, data.breedsUnlocked || {});
Â  Â  Â  window.usedMysteryKitten = data.usedMysteryKitten || false;
Â  Â  Â  
Â  Â  Â  // Handle achievements
Â  Â  Â  if (Array.isArray(data.achievementsData)) {
Â  Â  Â  Â  for (let ach of data.achievementsData) {
Â  Â  Â  Â  Â  const found = achievementsData.find(a => a.id === ach.id);
Â  Â  Â  Â  Â  if (found) found.achieved = ach.achieved;
Â  Â  Â  Â  }
Â  Â  Â  }
Â  Â  Â  
Â  Â  Â  // Handle user settings
Â  Â  Â  if (data.userSettings) {
Â  Â  Â  Â  userSettings = data.userSettings;
Â  Â  Â  Â  applyTheme(userSettings.theme);
Â  Â  Â  }

Â  Â  Â  updateUI();
Â  Â  Â  renderAchievements();
Â  Â  Â  renderBreeds();
Â  Â  Â  // If loading from a save code, ensure localStorage is updated
Â  Â  Â  if(input && input.length > 5) saveGameState(); 

Â  Â  } catch (e) {
Â  Â  Â  alert('Invalid save code or corrupted save data.');
Â  Â  Â  console.error('Load error:', e);
Â  Â  }
Â  }
Â  
Â  document.getElementById('saveCodeBox').addEventListener('click', function() {
Â  Â  this.select();
Â  });
    // --- END NEW: Save and Load Functions ---


Â  // Auto-Clicker Interval
Â  setInterval(() => {
Â  Â  let breedCPS = extraCPSBreed[selectedBreed] || 0;
Â  Â  const totalCPS = upgrades.autoClicker * 5 + upgrades.autoKittenFarm * 7 + upgrades.kittenPlanet * 20 + breedCPS;
Â  Â  if (totalCPS > 0) { addScore(totalCPS); }
Â  }, 1000);
Â  
Â  // NEW: Auto-Save Interval (saves progress every 5 seconds)
Â  setInterval(saveGameState, 5000); 

Â  function openOverlay(id) {
Â  Â  const el = document.getElementById(id);
Â  Â  if (el) el.style.display = 'block';
Â  Â  if(id === 'achievementsOverlay') renderAchievements();
Â  Â  if(id === 'breedsOverlay') renderBreeds();
Â  Â  if(id === 'settingsOverlay') updateSettingsUI();
Â  }
Â  function closeOverlay(id) {
Â  Â  const el = document.getElementById(id);
Â  Â  if (el) el.style.display = 'none';
Â  }
Â  function showTab(tabName) {
Â  Â  document.getElementById('clickUpgrades').style.display = (tabName === 'clickUpgrades') ? 'block' : 'none';
Â  Â  document.getElementById('cpsUpgrades').style.display = (tabName === 'cpsUpgrades') ? 'block' : 'none';
Â  Â  document.getElementById('tabClickUpgrades').classList.toggle('active', tabName === 'clickUpgrades');
Â  Â  document.getElementById('tabCPSUpgrades').classList.toggle('active', tabName === 'cpsUpgrades');
Â  }
Â  function checkAchievements() {
Â  Â  for (const ach of achievementsData) {
Â  Â  Â  if (!ach.achieved && ach.condition()) {
Â  Â  Â  Â  ach.achieved = true;
Â  Â  Â  Â  showNotification('Achievement unlocked: ' + ach.text);
Â  Â  Â  Â  renderAchievements();
Â  Â  Â  }
Â  Â  }
Â  Â  let achCount = achievementsData.reduce((acc, a) => acc + (a.achieved ? 1 : 0), 0);
Â  Â  if (!breedsUnlocked["maine_coon"] && achCount >= 3) {
Â  Â  Â  breedsUnlocked["maine_coon"] = true;
Â  Â  Â  showNotification("You unlocked the Maine Coon breed!");
Â  Â  Â  renderBreeds();
Â  Â  }
Â  Â  if (!breedsUnlocked["siamese"] && achCount >= 6) {
Â  Â  Â  breedsUnlocked["siamese"] = true;
Â  Â  Â  showNotification("You unlocked the Siamese breed!");
Â  Â  Â  // Spawn a mystery kitten when Siamese is unlocked
Â  Â  Â  spawnMysteryKittenButton();
Â  Â  Â  renderBreeds();
Â  Â  }
Â  }
Â  function renderAchievements() {
Â  Â  const container = document.getElementById('achievementsList');
Â  Â  container.innerHTML = '';
Â  Â  for (const ach of achievementsData) {
Â  Â  Â  const card = document.createElement('div');
Â  Â  Â  card.className = 'achievement-card ' + (ach.achieved ? 'achieved' : 'locked');
Â  Â  Â  card.innerHTML = `<span class="achievement-icon">${ach.achieved ? 'ğŸ†' : 'ğŸ”’'}</span><span>${ach.text}</span>`;
Â  Â  Â  container.appendChild(card);
Â  Â  }
Â  }
Â  function showNotification(text) {
Â  Â  const notif = document.createElement('div');
Â  Â  notif.textContent = text;
Â  Â  notif.style.position = 'fixed';
Â  Â  notif.style.top = '80px';
Â  Â  notif.style.left = '50%';
Â  Â  notif.style.transform = 'translateX(-50%)';
Â  Â  notif.style.background = '#c2185b';
Â  Â  notif.style.color = 'white';
Â  Â  notif.style.padding = '10px 20px';
Â  Â  notif.style.borderRadius = '8px';
Â  Â  notif.style.zIndex = 2000;
Â  Â  notif.style.opacity = userSettings.notifVolume;
Â  Â  document.body.appendChild(notif);
Â  Â  setTimeout(() => notif.remove(), 3000);
Â  }
Â  function renderBreeds() {
Â  Â  const list = document.getElementById('breedsList');
Â  Â  list.innerHTML = '';
Â  Â  ["american_shorthair", "maine_coon", "siamese"].forEach(breed => {
Â  Â  Â  const div = document.createElement('div');
Â  Â  Â  div.style.margin = "28px 0 25px 0";
Â  Â  Â  div.style.padding = "12px";
Â  Â  Â  div.style.background = "#fff6f6";
Â  Â  Â  div.style.borderRadius = "12px";
Â  Â  Â  div.style.boxShadow = "0 2px 12px #f8bbd0";
Â  Â  Â  div.style.maxWidth = "340px";
Â  Â  Â  div.style.marginLeft = "auto";
Â  Â  Â  div.style.marginRight = "auto";
Â  Â  Â  let label = `<b>${breedNames[breed]}</b>`;
Â  Â  Â  if (breed === "maine_coon" && !breedsUnlocked.maine_coon) {
Â  Â  Â  Â  label += `<span class="breed-lock">ğŸ”’ (Unlock by earning 3 achievements)</span>`;
Â  Â  Â  }
Â  Â  Â  if (breed === "siamese" && !breedsUnlocked.siamese) {
Â  Â  Â  Â  label += `<span class="breed-lock">ğŸ”’ (Unlock by earning 6 achievements)</span>`;
Â  Â  Â  }
Â  Â  Â  div.innerHTML = `
Â  Â  Â  Â  <div style="font-size:20px;margin-bottom:8px;">${label}</div>
Â  Â  Â  Â  <img src="${breedImages[breed]}" alt="${breedNames[breed]}" style="width:120px;border-radius: 14px;box-shadow:0 2px 8px #f8bbd0;">
Â  Â  Â  Â  <div style="margin-top:7px;">
Â  Â  Â  Â  Â  <button class="breed-select-btn${selectedBreed===breed?" selected":""}"
Â  Â  Â  Â  Â  Â  onclick="selectBreed('${breed}')" ${!breedsUnlocked[breed] ? "disabled" : ""}>
Â  Â  Â  Â  Â  Â  ${selectedBreed===breed ? "Selected" : "Select"}
Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  ${breed === "maine_coon" ? `<div style="font-size:15px;margin-top:4px;color:#ad1457;"><b>Bonus:</b> +5 CPS</div>` : ""}
Â  Â  Â  Â  ${breed === "siamese" ? `<div style="font-size:15px;margin-top:4px;color:#ad1457;"><b>Bonus:</b> +20 Click Value, Spawns a Mystery Kitten</div>` : ""}
Â  Â  Â  `;
Â  Â  Â  list.appendChild(div);
Â  Â  });
Â  }
Â  window.selectBreed = function(breed) {
Â  Â  if (!breedsUnlocked[breed]) return;
Â  Â  if (breed === "siamese") {
Â  Â  Â  spawnMysteryKittenButton();
Â  Â  }
Â  Â  selectedBreed = breed;
Â  Â  updateUI();
Â  Â  checkAchievements();
Â  Â  renderBreeds();
Â  };
Â  

Â  function updateSettingsUI() {
Â  Â  document.getElementById('themeSelect').value = userSettings.theme;
Â  Â  document.getElementById('floatScoreToggle').checked = userSettings.floatScore;
Â  Â  document.getElementById('notifVolume').value = userSettings.notifVolume;
Â  Â  document.getElementById('disableAnimations').checked = userSettings.disableAnimations;
Â  }
Â  document.getElementById('themeSelect').addEventListener('change', function() {
Â  Â  userSettings.theme = this.value;
Â  Â  applyTheme(userSettings.theme);
Â  Â  try { localStorage.setItem('kittenTheme', userSettings.theme); } catch (e) {}
Â  });
Â  function applyTheme(theme) {
Â  Â  document.body.className = '';
Â  Â  document.body.classList.add('theme-' + theme);
Â  }
Â  document.getElementById('floatScoreToggle').addEventListener('change', function() {
Â  Â  userSettings.floatScore = this.checked;
Â  });
Â  document.getElementById('notifVolume').addEventListener('input', function() {
Â  Â  userSettings.notifVolume = parseFloat(this.value);
Â  });
Â  document.getElementById('disableAnimations').addEventListener('change', function() {
Â  Â  userSettings.disableAnimations = this.checked;
Â  });
Â  function resetProgress() {
Â  Â  if(confirm('Are you sure you want to reset all progress?')) {
Â  Â  Â  score = 0; clickValue = 1;
Â  Â  Â  upgrades = {milkBowl:0,catFood:0,scratcher:0,kittenFactory:0,cityOfKittens:0,worldOfMeows:0,autoClicker:0,autoKittenFarm:0,kittenPlanet:0};
Â  Â  Â  upgradeCosts = {milkBowl:25,catFood:115,scratcher:700,kittenFactory:5000,cityOfKittens:30000,worldOfMeows:200000,autoClicker:2000,autoKittenFarm:15000,kittenPlanet:1000000};
Â  Â  Â  selectedBreed = "american_shorthair";
Â  Â  Â  breedsUnlocked = { american_shorthair: true, maine_coon: false, siamese: false };
Â  Â  Â  for(let a of achievementsData) a.achieved = false;
Â  Â  Â  userSettings = {theme:"pink", floatScore:true, notifVolume:1, disableAnimations:false};
Â  Â  Â  window.usedMysteryKitten = false;
Â  Â  Â  applyTheme(userSettings.theme);
Â  Â  Â  updateUI(); renderAchievements(); renderBreeds();
Â  Â  Â  try { 
Â  Â  Â  Â  localStorage.removeItem('kittenSave'); 
Â  Â  Â  Â  localStorage.removeItem('kittenTheme'); 
Â  Â  Â  } catch(e){}
Â  Â  }
Â  }

Â  window.addEventListener('load', () => {
Â  Â  // NEW: Load save game state on startup
Â  Â  loadSave(); 
Â  Â  
Â  Â  // Load user theme setting separately if main save is not found
Â  Â  try {
Â  Â  Â  const savedTheme = localStorage.getItem('kittenTheme');
Â  Â  Â  if (savedTheme) {
Â  Â  Â  Â  userSettings.theme = savedTheme;
Â  Â  Â  Â  applyTheme(savedTheme);
Â  Â  Â  }
Â  Â  } catch (e) {}

Â  Â  document.getElementById('mysteryKittenBtn').style.display = 'none';
Â  Â  if(mysteryKittenTimeout) clearTimeout(mysteryKittenTimeout);
Â  Â  scheduleMysteryKitten();
Â  Â  
Â  Â  // Also apply loaded settings to UI immediately
Â  Â  updateSettingsUI();
Â  Â  updateUI(); // ensure UI updates after loading
Â  });
Â  
Â  // NEW: Save game state right before the user closes/leaves the page
Â  window.addEventListener('beforeunload', saveGameState);

Â  // --- MYSTERY KITTEN RANDOM SPAWN ---
Â  let mysteryKittenTimeout = null;
Â  let mysteryKittenHideTimeout = null;
Â  function randomizeMysteryKittenButtonPosition() {
Â  Â  const btn = document.getElementById('mysteryKittenBtn');
Â  Â  // Wait until the button is rendered
Â  Â  setTimeout(() => {
Â  Â  Â  const minX = window.innerWidth * 0.05;
Â  Â  Â  const maxX = window.innerWidth * 0.85 - btn.offsetWidth;
Â  Â  Â  const minY = window.innerHeight * 0.15;
Â  Â  Â  const maxY = window.innerHeight * 0.80 - btn.offsetHeight;
Â  Â  Â  const left = Math.floor(Math.random() * (maxX - minX) + minX);
Â  Â  Â  const top = Math.floor(Math.random() * (maxY - minY) + minY);
Â  Â  Â  btn.style.left = left + "px";
Â  Â  Â  btn.style.top = top + "px";
Â  Â  }, 15);
Â  }
Â  function spawnMysteryKittenButton() {
Â  Â  const btn = document.getElementById('mysteryKittenBtn');
Â  Â  btn.style.display = '';
Â  Â  randomizeMysteryKittenButtonPosition();
Â  Â  if (mysteryKittenHideTimeout) clearTimeout(mysteryKittenHideTimeout);
Â  Â  mysteryKittenHideTimeout = setTimeout(() => {
Â  Â  Â  btn.style.display = 'none';
Â  Â  }, 10000);
Â  }
Â  function scheduleMysteryKitten() {
Â  Â  if (selectedBreed === "siamese") {
Â  Â  Â  spawnMysteryKittenButton();
Â  Â  Â  return;
Â  Â  }
Â  Â  const randomDelay = Math.floor(Math.random() * 1800 * 1000);
Â  Â  mysteryKittenTimeout = setTimeout(() => {
Â  Â  Â  spawnMysteryKittenButton();
Â  Â  }, randomDelay);
Â  }

Â  document.getElementById('mysteryKittenBtn').addEventListener('click', function() {
Â  Â  if (score < 1) {
Â  Â  Â  showNotification('You need some kittens to risk!');
Â  Â  Â  return;
Â  Â  }
Â  Â  window.usedMysteryKitten = true;
Â  Â  const rand = Math.random();
Â  Â  if (rand < 0.5) {
Â  Â  Â  const gain = Math.floor(score * 0.17);
Â  Â  Â  score += gain;
Â  Â  Â  if(userSettings.floatScore) showFloatingScore(gain);
Â  Â  Â  showNotification(`Mystery Kitten! You gained +${gain} kittens!`);
Â  Â  } else if (rand < 0.67) {
Â  Â  Â  const loss = Math.floor(score * 0.17);
Â  Â  Â  score -= loss;
Â  Â  Â  if (score < 0) score = 0;
Â  Â  Â  if(userSettings.floatScore) showFloatingScore(-loss);
Â  Â  Â  showNotification(`Oh no! Mystery Kitten took -${loss} kittens!`);
Â  Â  } else {
Â  Â  Â  showNotification('Mystery Kitten did nothing this time.');
Â  Â  }
Â  Â  updateUI();
Â  Â  checkAchievements();
Â  Â  // Hide button and reschedule (except for siamese, which always shows)
Â  Â  this.style.display = 'none';
Â  Â  if (selectedBreed === "siamese") {
Â  Â  Â  setTimeout(spawnMysteryKittenButton, 1000);
Â  Â  } else {
Â  Â  Â  if (mysteryKittenTimeout) clearTimeout(mysteryKittenTimeout);
Â  Â  Â  scheduleMysteryKitten();
Â  Â  }
Â  });
</script>
</body>
</html>
